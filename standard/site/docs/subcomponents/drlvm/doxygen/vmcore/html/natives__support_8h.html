<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>VM Infrastructure: natives_support.h File Reference</title>
<link href="hydoxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>natives_support.h File Reference</h1>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_native_lib_info.html">NativeLibInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Native library information declaration.  <a href="struct_native_lib_info.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef apr_dso_handle_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#cb13f17e7774a45ea271c98272804496">NativeLibraryHandle</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Native library handle typedef declaration.  <a href="#cb13f17e7774a45ea271c98272804496"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef apr_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#71060d99dba9290c754cbff86b2b17bf">NativeLoadStatus</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Native library status typedef declaration.  <a href="#71060d99dba9290c754cbff86b2b17bf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct_native_lib_info.html">NativeLibInfo</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#7bc36f5e0d714bcc6b57d2c193fe83d5">NativeLibraryList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Native libraries list typedef declaration.  <a href="#7bc36f5e0d714bcc6b57d2c193fe83d5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">jint&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#4138c4670120d3f8805867b66f9b3808">natives_init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes natives_support module.  <a href="#4138c4670120d3f8805867b66f9b3808"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#41d26e4a27f1ff3de56f4e159f44e457">natives_cleanup</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanups natives_support module.  <a href="#41d26e4a27f1ff3de56f4e159f44e457"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="natives__support_8h.html#cb13f17e7774a45ea271c98272804496">NativeLibraryHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#e2b407cba4829fb388707e0b395cf682">natives_load_library</a> (const char *library_name, bool *just_loaded, <a class="el" href="natives__support_8h.html#71060d99dba9290c754cbff86b2b17bf">NativeLoadStatus</a> *pstatus)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function loads native library with a given name.  <a href="#e2b407cba4829fb388707e0b395cf682"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#1a8a935707b7bfc56d980189944bd11c">natives_unload_library</a> (<a class="el" href="natives__support_8h.html#cb13f17e7774a45ea271c98272804496">NativeLibraryHandle</a> library_handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function unloads native library.  <a href="#1a8a935707b7bfc56d980189944bd11c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#d6557efb5380fad00931265a21a3beec">natives_is_library_loaded</a> (const char *library_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function looks for loaded native library with a given name.  <a href="#d6557efb5380fad00931265a21a3beec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="vm__core__types_8h.html#2d01be9717743d2e4d1e273fa941d0d7">GenericFunctionPointer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#02167ee93b5a5941b9854575b620af2e">natives_lookup_method</a> (<a class="el" href="struct_native_lib_info.html">NativeLibraryList</a> libraries, const char *class_name, const char *method_name, const char *method_desc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function looks for method with a given name and descriptor in a given native library.  <a href="#02167ee93b5a5941b9854575b620af2e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#1db4aab025f7d33c066be54a4614212e">natives_describe_error</a> (<a class="el" href="natives__support_8h.html#71060d99dba9290c754cbff86b2b17bf">NativeLoadStatus</a> error, char *buf, size_t buflen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function returns detailed error description.  <a href="#1db4aab025f7d33c066be54a4614212e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="natives__support_8h.html#ec36c4c974882d492852bd5cf2e0870f">natives_is_library_loaded_slow</a> (const char *libname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function detects if module is JNI library.  <a href="#ec36c4c974882d492852bd5cf2e0870f"></a><br></td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="cb13f17e7774a45ea271c98272804496"></a><!-- doxytag: member="natives_support.h::NativeLibraryHandle" ref="cb13f17e7774a45ea271c98272804496" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct apr_dso_handle_t* <a class="el" href="natives__support_8h.html#cb13f17e7774a45ea271c98272804496">NativeLibraryHandle</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Native library handle typedef declaration. 
<p>

</div>
</div><p>
<a class="anchor" name="71060d99dba9290c754cbff86b2b17bf"></a><!-- doxytag: member="natives_support.h::NativeLoadStatus" ref="71060d99dba9290c754cbff86b2b17bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef apr_status_t <a class="el" href="natives__support_8h.html#71060d99dba9290c754cbff86b2b17bf">NativeLoadStatus</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Native library status typedef declaration. 
<p>

</div>
</div><p>
<a class="anchor" name="7bc36f5e0d714bcc6b57d2c193fe83d5"></a><!-- doxytag: member="natives_support.h::NativeLibraryList" ref="7bc36f5e0d714bcc6b57d2c193fe83d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="struct_native_lib_info.html">NativeLibInfo</a>* <a class="el" href="struct_native_lib_info.html">NativeLibraryList</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Native libraries list typedef declaration. 
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="4138c4670120d3f8805867b66f9b3808"></a><!-- doxytag: member="natives_support.h::natives_init" ref="4138c4670120d3f8805867b66f9b3808" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jint natives_init           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes natives_support module. 
<p>
Caller must provide thread safety.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns JNI_OK if initialized successfully. </dd></dl>

</div>
</div><p>
<a class="anchor" name="41d26e4a27f1ff3de56f4e159f44e457"></a><!-- doxytag: member="natives_support.h::natives_cleanup" ref="41d26e4a27f1ff3de56f4e159f44e457" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void natives_cleanup           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Cleanups natives_support module. 
<p>
Cleans all remaining libraries. 
</div>
</div><p>
<a class="anchor" name="e2b407cba4829fb388707e0b395cf682"></a><!-- doxytag: member="natives_support.h::natives_load_library" ref="e2b407cba4829fb388707e0b395cf682" args="(const char *library_name, bool *just_loaded, NativeLoadStatus *pstatus)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="natives__support_8h.html#cb13f17e7774a45ea271c98272804496">NativeLibraryHandle</a> natives_load_library           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>library_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>just_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="natives__support_8h.html#71060d99dba9290c754cbff86b2b17bf">NativeLoadStatus</a> *&nbsp;</td>
          <td class="paramname"> <em>pstatus</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function loads native library with a given name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>library_name</em>&nbsp;</td><td>- name of library </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>just_loaded</em>&nbsp;</td><td>- is set when this library was not loaded before this call </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pstatus</em>&nbsp;</td><td>- pointer to status variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Loaded native library handle. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1a8a935707b7bfc56d980189944bd11c"></a><!-- doxytag: member="natives_support.h::natives_unload_library" ref="1a8a935707b7bfc56d980189944bd11c" args="(NativeLibraryHandle library_handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void natives_unload_library           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="natives__support_8h.html#cb13f17e7774a45ea271c98272804496">NativeLibraryHandle</a>&nbsp;</td>
          <td class="paramname"> <em>library_handle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function unloads native library. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>library_handle</em>&nbsp;</td><td>- native library to be unloaded </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="d6557efb5380fad00931265a21a3beec"></a><!-- doxytag: member="natives_support.h::natives_is_library_loaded" ref="d6557efb5380fad00931265a21a3beec" args="(const char *library_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool natives_is_library_loaded           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>library_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function looks for loaded native library with a given name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>library_name</em>&nbsp;</td><td>- searching native library name</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><code>TRUE</code> if search is success, otherwise - <code>FALSE</code>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="02167ee93b5a5941b9854575b620af2e"></a><!-- doxytag: member="natives_support.h::natives_lookup_method" ref="02167ee93b5a5941b9854575b620af2e" args="(NativeLibraryList libraries, const char *class_name, const char *method_name, const char *method_desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vm__core__types_8h.html#2d01be9717743d2e4d1e273fa941d0d7">GenericFunctionPointer</a> natives_lookup_method           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_native_lib_info.html">NativeLibraryList</a>&nbsp;</td>
          <td class="paramname"> <em>libraries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>class_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>method_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>method_desc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function looks for method with a given name and descriptor in a given native library. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>library_handle</em>&nbsp;</td><td>- native library handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>class_name</em>&nbsp;</td><td>- name of class </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method_name</em>&nbsp;</td><td>- name of method </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method_desc</em>&nbsp;</td><td>- descriptor of method</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Found native function pointer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1db4aab025f7d33c066be54a4614212e"></a><!-- doxytag: member="natives_support.h::natives_describe_error" ref="1db4aab025f7d33c066be54a4614212e" args="(NativeLoadStatus error, char *buf, size_t buflen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void natives_describe_error           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="natives__support_8h.html#71060d99dba9290c754cbff86b2b17bf">NativeLoadStatus</a>&nbsp;</td>
          <td class="paramname"> <em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>buflen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function returns detailed error description. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>error</em>&nbsp;</td><td>- error code </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>- string buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buflen</em>&nbsp;</td><td>- buffer size</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Found native function pointer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ec36c4c974882d492852bd5cf2e0870f"></a><!-- doxytag: member="natives_support.h::natives_is_library_loaded_slow" ref="ec36c4c974882d492852bd5cf2e0870f" args="(const char *libname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool natives_is_library_loaded_slow           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>libname</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function detects if module is JNI library. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>libname</em>&nbsp;</td><td>- library name (full or relative)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if specified library was loaded already by natives support </dd></dl>

</div>
</div><p>
<hr size="1">
<address style="text-align: center;">
  <small>
    <p>Genereated on Tue Mar 11 19:25:57 2008 by Doxygen.</p>
    <p>(c) Copyright 2005, 2008 The Apache Software Foundation or its licensors, as applicable. </p>
  </small>
</address>
</body>
</html>
