<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Jitrino: General execution support</title>
<link href="hydoxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>General execution support<br>
<small>
[<a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___s_u_p_p_o_r_t.html">Runtime support</a>]</small>
</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Most of 'rt_' functions here (except of <a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g55989c2fa1ca5661499ee2827647a51c" title="Checks whether a given method was compiled by the Jitrino.JET.">rt_check_method</a>) expect that the method passed as argument was indeed compiled by the Jitrino.JET. </dd></dl>

<p>
If this condition is not met, behaviour is unpredictable. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g55989c2fa1ca5661499ee2827647a51c">Jitrino::Jet.rt_check_method</a> (JIT_Handle jit, Method_Handle method)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks whether a given method was compiled by the Jitrino.JET.  <a href="#g55989c2fa1ca5661499ee2827647a51c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g986590625299ef2b6f02b6847830cc77">Jitrino::Jet.rt_unwind</a> (JIT_Handle jit, Method_Handle method, JitFrameContext *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">'Unwinds' stack for a given method.  <a href="#g986590625299ef2b6f02b6847830cc77"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g47add259c443c5c73b6f3840dffdb977">Jitrino::Jet.rt_enum</a> (JIT_Handle jit, Method_Handle method, GC_Enumeration_Handle henum, JitFrameContext *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enumerates root set for a given method.  <a href="#g47add259c443c5c73b6f3840dffdb977"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g5d8ca0dc79652e7458bf7fcbf0778a8f">Jitrino::Jet.rt_fix_handler_context</a> (JIT_Handle jit, Method_Handle method, JitFrameContext *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">'Fixes' a catch handler context to prepare for the control to be transferred to the handler.  <a href="#g5d8ca0dc79652e7458bf7fcbf0778a8f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#gd9848b13daabba9c97c8b5e03e30c4ec">Jitrino::Jet.rt_is_soe_area</a> (JIT_Handle jit, Method_Handle method, const JitFrameContext *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 'TRUE' if EIP referenced by context points to SOE checking area of the method.  <a href="#gd9848b13daabba9c97c8b5e03e30c4ec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g4f86d5056fe32bc4fb366387ff962737">Jitrino::Jet.rt_get_address_of_this</a> (JIT_Handle jit, Method_Handle method, const JitFrameContext *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns address of 'this' argument for the given method.  <a href="#g4f86d5056fe32bc4fb366387ff962737"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g37638e13eddeb08d09cedde2de21d302">Jitrino::Jet.rt_native2bc</a> (JIT_Handle jit, Method_Handle method, const void *ip, unsigned short *pbc_pc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds PC for a given IP.  <a href="#g37638e13eddeb08d09cedde2de21d302"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___j_i_t_r_i_n_o___j_e_t___r_u_n_t_i_m_e___g_e_n_e_r_a_l.html#g4a0576f8ab9614e5135a8e9c09e2d424">Jitrino::Jet.rt_bc2native</a> (JIT_Handle jit, Method_Handle method, unsigned short bc_pc, void **pip)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds IP for a given PC.  <a href="#g4a0576f8ab9614e5135a8e9c09e2d424"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g55989c2fa1ca5661499ee2827647a51c"></a><!-- doxytag: member="Jitrino::Jet::rt_check_method" ref="g55989c2fa1ca5661499ee2827647a51c" args="(JIT_Handle jit, Method_Handle method)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Jitrino.Jet.rt_check_method           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks whether a given method was compiled by the Jitrino.JET. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- a handle of a method to be checked </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><b>true</b> - if the method was compiled by Jitrino.JET, <b>false</b> otherwise. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g986590625299ef2b6f02b6847830cc77"></a><!-- doxytag: member="Jitrino::Jet::rt_unwind" ref="g986590625299ef2b6f02b6847830cc77" args="(JIT_Handle jit, Method_Handle method, JitFrameContext *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Jitrino.Jet.rt_unwind           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JitFrameContext *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
'Unwinds' stack for a given method. 
<p>
Speaking loosely, the 'unwinding' means 'to perform a return' from the given method. The rt_unwind function updates JitFrameContext:<ul>
<li>'restores' registers (if necessary)</li><li>sets IP pointer to point to the return addres</li><li>sets SP to 'pop out' IP from stack</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- method handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>- a pointer to the context to be updated </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g47add259c443c5c73b6f3840dffdb977"></a><!-- doxytag: member="Jitrino::Jet::rt_enum" ref="g47add259c443c5c73b6f3840dffdb977" args="(JIT_Handle jit, Method_Handle method, GC_Enumeration_Handle henum, JitFrameContext *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Jitrino.Jet.rt_enum           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GC_Enumeration_Handle&nbsp;</td>
          <td class="paramname"> <em>henum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JitFrameContext *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enumerates root set for a given method. 
<p>
Root set enumeration procedure lists all the objects currently in use by the given method.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- method handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>henum</em>&nbsp;</td><td>- garbage collector's enumeration handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>- a pointer to context to be updated </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g5d8ca0dc79652e7458bf7fcbf0778a8f"></a><!-- doxytag: member="Jitrino::Jet::rt_fix_handler_context" ref="g5d8ca0dc79652e7458bf7fcbf0778a8f" args="(JIT_Handle jit, Method_Handle method, JitFrameContext *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Jitrino.Jet.rt_fix_handler_context           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JitFrameContext *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
'Fixes' a catch handler context to prepare for the control to be transferred to the handler. 
<p>
'fix handler context' for a given IP means to correct stack pointer, so a control can be transferred from the IP to appropriate handler <b>in the same method</b>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- method handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>- a pointer to context to be updated </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gd9848b13daabba9c97c8b5e03e30c4ec"></a><!-- doxytag: member="Jitrino::Jet::rt_is_soe_area" ref="gd9848b13daabba9c97c8b5e03e30c4ec" args="(JIT_Handle jit, Method_Handle method, const JitFrameContext *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Boolean Jitrino.Jet.rt_is_soe_area           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JitFrameContext *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns 'TRUE' if EIP referenced by context points to SOE checking area of the method. 
<p>

</div>
</div><p>
<a class="anchor" name="g4f86d5056fe32bc4fb366387ff962737"></a><!-- doxytag: member="Jitrino::Jet::rt_get_address_of_this" ref="g4f86d5056fe32bc4fb366387ff962737" args="(JIT_Handle jit, Method_Handle method, const JitFrameContext *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* Jitrino.Jet.rt_get_address_of_this           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JitFrameContext *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns address of 'this' argument for the given method. 
<p>
Returns an address where the 'this' pointer is stored. This is normally used by VM for unwinding from the synchronized instance method, so VM can correctly perform MONITOREXIT * on the instance.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- method handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>- pointer to context </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>address of where 'this' is stored. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g37638e13eddeb08d09cedde2de21d302"></a><!-- doxytag: member="Jitrino::Jet::rt_native2bc" ref="g37638e13eddeb08d09cedde2de21d302" args="(JIT_Handle jit, Method_Handle method, const void *ip, unsigned short *pbc_pc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Jitrino.Jet.rt_native2bc           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short *&nbsp;</td>
          <td class="paramname"> <em>pbc_pc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finds PC for a given IP. 
<p>
The function finds Java byte code's program counter (PC) for a given address of a native instruction (IP). <dl class="note" compact><dt><b>Note:</b></dt><dd>If the given IP does not belong to the method, the behavior is not specified.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- method handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td>- address of native instruction to find PC for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pbc_pc</em>&nbsp;</td><td>- where to store the found PC </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g4a0576f8ab9614e5135a8e9c09e2d424"></a><!-- doxytag: member="Jitrino::Jet::rt_bc2native" ref="g4a0576f8ab9614e5135a8e9c09e2d424" args="(JIT_Handle jit, Method_Handle method, unsigned short bc_pc, void **pip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Jitrino.Jet.rt_bc2native           </td>
          <td>(</td>
          <td class="paramtype">JIT_Handle&nbsp;</td>
          <td class="paramname"> <em>jit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Method_Handle&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&nbsp;</td>
          <td class="paramname"> <em>bc_pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>pip</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finds IP for a given PC. 
<p>
The function finds and returns address of the first native instruction (IP) for a given Java byte code's program counter (PC).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jit</em>&nbsp;</td><td>- JIT handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>- method handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bc_pc</em>&nbsp;</td><td>- byte code program counter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pip</em>&nbsp;</td><td>- to store the found IP </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr size="1">
<address style="text-align: center;">
  <small>
    <p>Genereated on Tue Mar 11 19:25:39 2008 by Doxygen.</p>
    <p>(c) Copyright 2005, 2008 The Apache Software Foundation or its licensors, as applicable. </p>
  </small>
</address>
</body>
</html>
