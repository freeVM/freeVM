<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Harmony Class Library Porting: modules/archive/src/main/native/zip/shared/zipsup.c File Reference</title>
<link href="hydoxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1>modules/archive/src/main/native/zip/shared/zipsup.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Zip Support for Java VM. 
<p>

<p>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &quot;<a class="el" href="hyport_8h.html">hyport.h</a>&quot;</code><br>
<code>#include &quot;zipsup.h&quot;</code><br>
<code>#include &quot;hyzipnls.h&quot;</code><br>
<code>#include &quot;zlib.h&quot;</code><br>
<code>#include &quot;hythread.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#8f786e6aeeef2187097de0d018199541">zip_getZipEntryData</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, HyZipEntry *entry, U_8 *buffer, U_32 bufferSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to read and uncompress the data for the zip entry entry.  <a href="#8f786e6aeeef2187097de0d018199541"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#0ae52ee1efa0b1aea9885dcb2ac25cbe">zip_getZipEntryFromOffset</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, HyZipEntry *entry, IDATA offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to read a zip entry at offset from the zip file provided.  <a href="#0ae52ee1efa0b1aea9885dcb2ac25cbe"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#2923548d70ed7371ec0936aafc05f3ae">zip_establishCache</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called to set up a cache when a zip file is opened with a cachePool but without a cache, or when the current cache is found to be invalid in some way.  <a href="#2923548d70ed7371ec0936aafc05f3ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#47a5a30ab83dd4800d0a30f33d9b8edf">zip_resetZipFile</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, IDATA *nextEntryPointer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset nextEntryPointer to the first entry in the file.  <a href="#47a5a30ab83dd4800d0a30f33d9b8edf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#42ded9f91481c454f24ec08e6fcae612">zip_getNextZipEntry</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, HyZipEntry *zipEntry, IDATA *nextEntryPointer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the next zip entry at nextEntryPointer into zipEntry.  <a href="#42ded9f91481c454f24ec08e6fcae612"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#fd13b3fbadf479a07b078134821e132b">zip_getZipEntryExtraField</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, HyZipEntry *entry, U_8 *buffer, U_32 bufferSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the extra field of entry from the zip file filename.  <a href="#fd13b3fbadf479a07b078134821e132b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#79c8e9350072113a434591846751196d">zip_initZipEntry</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipEntry *entry)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a zip entry.  <a href="#79c8e9350072113a434591846751196d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#624fb23dfb7bb27c9d1634c29b3fbd82">zip_openZipFile</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, char *filename, HyZipFile *zipFile, HyZipCachePool *cachePool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to open a zip file.  <a href="#624fb23dfb7bb27c9d1634c29b3fbd82"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipEntry *entry)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free any memory associated with a zip entry.  <a href="#e7040ae0c63c136a2a11a3d88f7d2703"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32 VMCALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#1399aa2da62ddf6bf89784e8ed574b6d">zip_closeZipFile</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, struct HyZipFile *zipFile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to close the zipfile.  <a href="#1399aa2da62ddf6bf89784e8ed574b6d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#990523ab485adeb02693662f930cfd8f">zip_getZipEntryComment</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, HyZipEntry *entry, U_8 *buffer, U_32 bufferSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the file comment for entry.  <a href="#990523ab485adeb02693662f930cfd8f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">I_32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zipsup_8c.html#094b3f70310034b9c492afcf97902c8c">zip_getZipEntry</a> (<a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *portLib, HyZipFile *zipFile, HyZipEntry *entry, const char *filename, BOOLEAN findDirectory)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to find and read the zip entry corresponding to filename.  <a href="#094b3f70310034b9c492afcf97902c8c"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="1399aa2da62ddf6bf89784e8ed574b6d"></a><!-- doxytag: member="zipsup.c::zip_closeZipFile" ref="1399aa2da62ddf6bf89784e8ed574b6d" args="(HyPortLibrary *portLib, struct HyZipFile *zipFile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 VMCALL zip_closeZipFile           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to close the zipfile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>The zip file to be closed</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success <p>
ZIP_ERR_FILE_CLOSE_ERROR if there is an error closing the file <p>
ZIP_ERR_INTERNAL_ERROR if there is an internal error </dd></dl>

</div>
</div><p>
<a class="anchor" name="2923548d70ed7371ec0936aafc05f3ae"></a><!-- doxytag: member="zipsup.c::zip_establishCache" ref="2923548d70ed7371ec0936aafc05f3ae" args="(HyPortLibrary *portLib, HyZipFile *zipFile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_establishCache           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called to set up a cache when a zip file is opened with a cachePool but without a cache, or when the current cache is found to be invalid in some way. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip file for which we want to establish a cache</td></tr>
  </table>
</dl>
The current cache is marked as invalid such that new instances of zip files won't try to use it and an attempt is made to establish a new cache.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading from zipFile <p>
ZIP_ERR_FILE_OPEN_ERROR if is there is an error opening the file <p>
ZIP_ERR_UNKNOWN_FILE_TYPE if the file type is unknown <p>
ZIP_ERR_UNSUPPORTED_FILE_TYPE if the file type is unsupported <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call <p>
ZIP_ERR_INTERNAL_ERROR if there was an internal error </dd></dl>

</div>
</div><p>
<a class="anchor" name="e7040ae0c63c136a2a11a3d88f7d2703"></a><!-- doxytag: member="zipsup.c::zip_freeZipEntry" ref="e7040ae0c63c136a2a11a3d88f7d2703" args="(HyPortLibrary *portLib, HyZipEntry *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zip_freeZipEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free any memory associated with a zip entry. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the zip entry we are freeing</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This does not free the entry itself. </dd></dl>

</div>
</div><p>
<a class="anchor" name="42ded9f91481c454f24ec08e6fcae612"></a><!-- doxytag: member="zipsup.c::zip_getNextZipEntry" ref="42ded9f91481c454f24ec08e6fcae612" args="(HyPortLibrary *portLib, HyZipFile *zipFile, HyZipEntry *zipEntry, IDATA *nextEntryPointer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_getNextZipEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>zipEntry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IDATA *&nbsp;</td>
          <td class="paramname"> <em>nextEntryPointer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the next zip entry at nextEntryPointer into zipEntry. 
<p>
Any memory held onto by zipEntry may be lost, and therefore MUST be freed with <a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a> first.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>The zip file being read </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>zipEntry</em>&nbsp;</td><td>compressed data is placed here </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nextEntryPointer</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading zipFile <p>
ZIP_ERR_FILE_CORRUPT if zipFile is corrupt <p>
ZIP_ERR_NO_MORE_ENTRIES if there are no more entries in zipFile <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703" title="Free any memory associated with a zip entry.">zip_freeZipEntry</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="094b3f70310034b9c492afcf97902c8c"></a><!-- doxytag: member="zipsup.c::zip_getZipEntry" ref="094b3f70310034b9c492afcf97902c8c" args="(HyPortLibrary *portLib, HyZipFile *zipFile, HyZipEntry *entry, const char *filename, BOOLEAN findDirectory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_getZipEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOLEAN&nbsp;</td>
          <td class="paramname"> <em>findDirectory</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to find and read the zip entry corresponding to filename. 
<p>
If found, read the entry into the parameter entry.<p>
If an uncached entry is found, the filename field will be filled in. This memory will have to be freed with <a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the file being read from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the zip entry found in zipFile is read to here </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>the name of the file that corresponds to entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>findDirectory</em>&nbsp;</td><td>when true, match a directory even if filename does not end in '/'. Note findDirectory is only supported (for the JCL) when there is a cache</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or one of the following: <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading from zipFile <p>
ZIP_ERR_FILE_CORRUPT if zipFile is corrupt <p>
ZIP_ERR_ENTRY_NOT_FOUND if a zip entry with name filename was not found <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703" title="Free any memory associated with a zip entry.">zip_freeZipEntry</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="990523ab485adeb02693662f930cfd8f"></a><!-- doxytag: member="zipsup.c::zip_getZipEntryComment" ref="990523ab485adeb02693662f930cfd8f" args="(HyPortLibrary *portLib, HyZipFile *zipFile, HyZipEntry *entry, U_8 *buffer, U_32 bufferSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_getZipEntryComment           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U_8 *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U_32&nbsp;</td>
          <td class="paramname"> <em>bufferSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the file comment for entry. 
<p>
If buffer is non-NULL, it is used, but not held onto by entry.<p>
If buffer is NULL, memory is allocated and held onto by entry, and thus should later be freed with <a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip file concerned </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the entry who's comment we want </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>may or may not be NULL </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufferSize</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or one of the following <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading the file comment from zipEntry <p>
ZIP_ERR_FILE_CORRUPT if zipFile is corrupt <p>
ZIP_ERR_ENTRY_NOT_FOUND if entry is not found <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call <p>
ZIP_ERR_BUFFER_TOO_SMALL if buffer is too small to hold the comment for zipFile </dd></dl>

</div>
</div><p>
<a class="anchor" name="8f786e6aeeef2187097de0d018199541"></a><!-- doxytag: member="zipsup.c::zip_getZipEntryData" ref="8f786e6aeeef2187097de0d018199541" args="(HyPortLibrary *portLib, HyZipFile *zipFile, HyZipEntry *entry, U_8 *buffer, U_32 bufferSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_getZipEntryData           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U_8 *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U_32&nbsp;</td>
          <td class="paramname"> <em>bufferSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to read and uncompress the data for the zip entry entry. 
<p>
If buffer is non-NULL it is used, but not explicitly held onto by the entry. If buffer is NULL, memory is allocated and held onto by the entry, and thus should later be freed with <a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip file being read from. </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the zip entry </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>may or may not be NULL </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufferSize</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading from zipEntry <p>
ZIP_ERR_FILE_CORRUPT if zipFile is corrupt <p>
ZIP_ERR_ENTRY_NOT_FOUND if entry is not found <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call <p>
ZIP_ERR_BUFFER_TOO_SMALL if buffer is too small to hold the comment for zipFile</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703" title="Free any memory associated with a zip entry.">zip_freeZipEntry</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="fd13b3fbadf479a07b078134821e132b"></a><!-- doxytag: member="zipsup.c::zip_getZipEntryExtraField" ref="fd13b3fbadf479a07b078134821e132b" args="(HyPortLibrary *portLib, HyZipFile *zipFile, HyZipEntry *entry, U_8 *buffer, U_32 bufferSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_getZipEntryExtraField           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U_8 *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U_32&nbsp;</td>
          <td class="paramname"> <em>bufferSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the extra field of entry from the zip file filename. 
<p>
buffer is used if non-NULL, but is not held onto by entry.<p>
If buffer is NULL, memory is allocated and held onto by entry, and MUST be freed later with <a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip file being read from. </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the zip entry concerned </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>may or may not be NULL </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufferSize</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success or one of the following: <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading from zipFile <p>
ZIP_ERR_FILE_CORRUPT if zipFile is corrupt <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call <p>
ZIP_ERR_BUFFER_TOO_SMALL if the buffer was non-Null but not large enough to hold the contents of entry</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703" title="Free any memory associated with a zip entry.">zip_freeZipEntry</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="0ae52ee1efa0b1aea9885dcb2ac25cbe"></a><!-- doxytag: member="zipsup.c::zip_getZipEntryFromOffset" ref="0ae52ee1efa0b1aea9885dcb2ac25cbe" args="(HyPortLibrary *portLib, HyZipFile *zipFile, HyZipEntry *entry, IDATA offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_getZipEntryFromOffset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IDATA&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to read a zip entry at offset from the zip file provided. 
<p>
If found, read into entry.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>If an uncached entry is found, the filename field will be filled in. This memory MUST be freed with <a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703">zip_freeZipEntry</a>.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip file being read </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>offset</em>&nbsp;</td><td>the offset into the zipFile of the desired zip entry </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the compressed data</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading from zipFile <p>
ZIP_ERR_FILE_CORRUPT if zipFile is corrupt <p>
ZIP_ERR_ENTRY_NOT_FOUND if the entry is not found <p>
ZIP_ERR_OUT_OF_MEMORY if there is not enough memory to complete this call</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="zipsup_8c.html#e7040ae0c63c136a2a11a3d88f7d2703" title="Free any memory associated with a zip entry.">zip_freeZipEntry</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="79c8e9350072113a434591846751196d"></a><!-- doxytag: member="zipsup.c::zip_initZipEntry" ref="79c8e9350072113a434591846751196d" args="(HyPortLibrary *portLib, HyZipEntry *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zip_initZipEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipEntry *&nbsp;</td>
          <td class="paramname"> <em>entry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize a zip entry. 
<p>
Should be called before the entry is passed to any other zip support functions<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>entry</em>&nbsp;</td><td>the zip entry to init</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

</div>
</div><p>
<a class="anchor" name="624fb23dfb7bb27c9d1634c29b3fbd82"></a><!-- doxytag: member="zipsup.c::zip_openZipFile" ref="624fb23dfb7bb27c9d1634c29b3fbd82" args="(HyPortLibrary *portLib, char *filename, HyZipFile *zipFile, HyZipCachePool *cachePool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I_32 zip_openZipFile           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipCachePool *&nbsp;</td>
          <td class="paramname"> <em>cachePool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to open a zip file. 
<p>
If the cache pool is non-NULL, the cachePool will be used to find a suitable cache, and if none can be found it will create one and add it to cachePool. Zip support is responsible for managing the lifetime of the cache.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>If cachePool is NULL, zipFile will be opened without a cache.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>the zip file to open </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip file structure to populate </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cachePool</em>&nbsp;</td><td>the cache pool</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success <p>
ZIP_ERR_FILE_OPEN_ERROR if is there is an error opening the file <p>
ZIP_ERR_FILE_READ_ERROR if there is an error reading the file <p>
ZIP_ERR_FILE_CORRUPT if the file is corrupt <p>
ZIP_ERR_UNKNOWN_FILE_TYPE if the file type is not known <p>
ZIP_ERR_UNSUPPORTED_FILE_TYPE if the file type is unsupported <p>
ZIP_ERR_OUT_OF_MEMORY if we are out of memory </dd></dl>

</div>
</div><p>
<a class="anchor" name="47a5a30ab83dd4800d0a30f33d9b8edf"></a><!-- doxytag: member="zipsup.c::zip_resetZipFile" ref="47a5a30ab83dd4800d0a30f33d9b8edf" args="(HyPortLibrary *portLib, HyZipFile *zipFile, IDATA *nextEntryPointer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zip_resetZipFile           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHyPortLibrary.html">HyPortLibrary</a> *&nbsp;</td>
          <td class="paramname"> <em>portLib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyZipFile *&nbsp;</td>
          <td class="paramname"> <em>zipFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IDATA *&nbsp;</td>
          <td class="paramname"> <em>nextEntryPointer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset nextEntryPointer to the first entry in the file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portLib</em>&nbsp;</td><td>the port library </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>zipFile</em>&nbsp;</td><td>the zip being read from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>nextEntryPointer</em>&nbsp;</td><td>will be reset to the first entry in the file</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

</div>
</div><p>
<hr size="1">
<address style="text-align: center;">
  <small>
    <p>Genereated on Tue Dec 9 14:12:59 2008 by Doxygen.</p>
    <p>(c) Copyright 2005, 2008 The Apache Software Foundation or its licensors, as applicable. </p>
  </small>
</address>
</body>
</html>
