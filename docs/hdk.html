<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements. See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->


<!-- start the processing -->
    <!-- ====================================================================== -->
    <!-- GENERATED FILE, DO NOT EDIT, EDIT THE XML FILE IN xdocs INSTEAD! -->
    <!-- Main Page Section -->
    <!-- ====================================================================== -->
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

                                                    <meta name="author" content="Harmony Documentation Team">
            <meta name="email" content="dev@harmony.apache.org">
            
           
            
            
            
            
            
            <title>Apache Harmony - Harmony Development Kit for the Apache Harmony</title>

                        
                
        <link rel="stylesheet" type="text/css" href="css/site.css" media="all" />
        <link rel="stylesheet" type="text/css" href="css/screen.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="css/print.css" media="print" />

                        
        </head>

        <body>
            <div id="pageHeader">
            <!-- Logo -->
                        <a id="harmonyLogo" href="http://harmony.apache.org/"><img src="./images/harmony-logo-new.png" alt="Apache Harmony"
          width="415" height="50" /></a>
      
            <!-- Advertisement -->
            <a href="http://na.apachecon.com">
                <img id="advertisement"
                     src="images/apachecon-na2010.gif"
                     width="234" height="60"
                     alt="ApacheCon US 2010" /></a>

            </div> <!-- pageHeader -->

            <div id="navigationmenu">
                    <!-- LEFT SIDE NAVIGATION -->
                
    <!-- ============================================================ -->

                <p class="menuItem">General</p>
        <ul>
                    <li class="menuItem">    <a href="./index.html">Home</a>
</li>
           
                        
                    <li class="menuItem">    <a href="http://www.apache.org/licenses/">License</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./contribution_policy.html">Contribution Policy</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./download.cgi">Downloads</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./bundles.html">Bundles</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./faq.html">FAQ</a>
</li>
           
                        
                    <li class="menuItem">    <a href="http://www.apache.org/security/">Security</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./sitemap.html">Sitemap</a>
</li>
           
                        
        
        </ul>
            <p class="menuItem">Community</p>
        <ul>
                    <li class="menuItem">    <a href="./get-involved.html">Get Involved</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./contributors.html">Who we are</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./mailing.html">Mailing Lists</a>
</li>
           
                        
                    <li class="menuItem">    <a href="http://issues.apache.org/jira/browse/HARMONY">Bug Tracker</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./related.html">Other Projects</a>
</li>
           
                        
        
        </ul>
            <p class="menuItem">Development</p>
        <ul>
                    <li class="menuItem">    <a href="./svn.html">Source Code</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./quickhelp_contributors.html">Getting Started</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./roadmap.html">Project Roadmap</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./issue_resolution_guideline.html">Resolution Guideline</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./performance.html">Performance</a>
</li>
           
                        
        
        </ul>
            <p class="menuItem">Documentation</p>
        <ul>
                    <li class="menuItem">    <a href="http://www.jdocs.com/harmony/5.M5/overview-summary.html">API Reference</a>
</li>
           
                        
                    <li class="menuItem">    <a href="http://wiki.apache.org/harmony">Wiki</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./subcomponents/drlvm/index.html">DRLVM</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./subcomponents/classlibrary/index.html">Class Library</a>
</li>
           
                        
                    <li class="menuItem">    <a href="./subcomponents/buildtest/index.html">Build-test Framework</a>
</li>
           
                        
        
        </ul>
            <p class="menuItem">Foundation</p>
        <ul>
                    <li class="menuItem">    <a href="http://www.apache.org">ASF</a>
</li>
           
                        
                    <li class="menuItem">    <a href="http://www.apache.org/foundation/sponsorship.html ">Sponsorship</a>
</li>
           
                        
                    <li class="menuItem">    <a href="http://www.apache.org/foundation/thanks.html ">Thanks</a>
</li>
           
                        
        
        </ul>
                    
                <!-- Add the ASF birthday logo to the end of the menu -->
                <img id="birthday"
                     src="http://www.apache.org/images/10yearsASF_170x101.jpg"
                     width="170" height="101"
                     vspace="30"
                     alt="Ten Years of the ASF" />
            </div>

            <!-- MAIN CONTENT -->
            <div id="top">
                                                        <h1>
      <a name="Harmony Development Kit for the Apache Harmony">Harmony Development Kit for the Apache Harmony</a>
    </h1>
                        <p>
                The Harmony Development Kit (HDK) allows a Harmony developer to
                rebuild any module of the Harmony Classlib or DRLVM in a standalone way by providing all the
                necessary supplementary binaries and header files. 
                HDK bundles are available for download as a standard part of regular Harmony builds
                (nightly, stable, etc).
                This document describes the layout of such an HDK and its contents.
            </p>
                                    
    <h2>
        <a name="Layout of the HDK">Layout of the HDK</a>
    </h2>
      
                        <p>
                    An HDK contains all the header files and binaries, both native and Java, required
                    for a Harmony developer to build against. The directory structure for an
                    HDK is as follows:
<pre>&lt;hdkbase&gt;
    |
    |---build
    |     |---make
    |     |---patternsets
    |     \---test
    |
    |---jdk
    |    |---jre
    |    \---include
    |
    |---include
    |
    \---lib</pre>

                    The directories laid out above are used in the following manner:

                    <ul>
                        <li>
                            <code>&lt;hdkbase&gt;/build/make</code> - this directory contains include
                            files used by native makefiles.
                        </li>

                        <li>
                            <code>&lt;hdkbase&gt;/build/patternsets</code> - this directory contains
                            patternsets describing jar content.
                        </li>

                        <li>
                            <code>&lt;hdkbase&gt;/build/test</code> - this directory contains test
                            support classes, bundled up into a jar file.
                        </li>

                        <li>
                            <code>&lt;hdkbase&gt;/jdk/jre</code> - this directory contains the standard
                            jre layout, including <code>bin</code> and <code>lib</code> directories.
                        </li>

                        <li>
                            <code>&lt;hdkbase&gt;/jdk/include</code> - this directory contains the standard
                            jdk header files. For example, jni.h is held here.
                        </li>

                        <li>
                            <code>&lt;hdkbase&gt;/include</code> - this directory contains header files that
                            are Harmony specific and are used across multiple Harmony modules.
                        </li>

                        <li>
                            <code>&lt;hdkbase&gt;/lib</code> - this directory is used in HDKs on Windows for
                            .lib files and on Linux for .a files necessary for linking during compilation of
                            Harmony natives.
                        </li>
                    </ul>
                </p>
                   
                                    
    <h2>
        <a name="Building Classlib Against an HDK">Building Classlib Against an HDK</a>
    </h2>
      
                        <p class="note">Note</p>
                                <p class="notetext">The HDK and relevant build system changes are work in progress.
                        Not all of the Ant targets/properties described exist yet, and thus not
                        all of what is described below currently works. This disclaimer will be
                        removed once work on the HDK is completed.</p>
                                <p>
                    The Harmony Class Library can be built at the global or modular level.
                    At the modular level, there are three ways to build:</p>
                                <ul>
                        <li>
                            <b>Building the default target</b> - An HDK is not required here, and the class
                            library is built against and into the default (deploy) directory. This is the
                            standard way to build, and is what happens when you just run <code>ant</code> at the
                            command line.
                        </li>
                        <li>
                            <b>Building against an HDK</b> - The location of an HDK must be specified at
                            the Ant command line, and the output will be built into the default (deploy)
                            directory. The command line for this is <code><nobr>ant -Dhy.hdk=path/to/HDK</nobr></code>.
                        </li>
                        <li>
                            <b>Building against an HDK and into a target directory (TBD)</b> - The location of
                            an HDK and of a target directory must be specified on the Ant command line.
                            The Class Library code will be compiled against the libraries contained in
                            the HDK, and the output of those compiles will be placed into the specified
                            target directory. The command line for this is <code><nobr>ant -Dhy.hdk=path/to/HDK
                            -DHY.TARGET=path/to/target</nobr>
                            </code>.
                        </li>
                    </ul>
                                <p class="example">Example</p>
                                <p class="exampletext">
                   If you wanted to build only the luni module against
                    an HDK, and put the resulting artifacts into a separate target directory,
                    do the following:
                    <ol>
                        <li>Checkout the luni module</li>
                        <li>cd into the root directory of the module</li>
                        <li>Execute <code>
                            <nobr>ant -Dhy.hdk=path/to/hdk -DHY.TARGET=path/to/target</nobr>
                        </code></li>
                    </ol></p>
                                <p>The luni Java and native code will be built against the HDK location
                    specified, and all produced binaries placed under the target directory, laid
                    out in the HDK structure described at the top of this page.
                </p>
                   
                <p class="backtotop"><a href="#top">Back to top</a></p>
                
                                            </div> <!-- top aka Main Content -->

            <!-- FOOTER -->
            <div id="pageFooter" class="special"><em>
                Copyright &#169; 2003-2010, The Apache Software Foundation
            </em></div>
        </body>
    </html>
<!-- end the processing -->


















